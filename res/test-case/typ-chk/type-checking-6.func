defn if a b c = {
    case a of {
        True -> {b}
        False -> {c}
    }
}

defn handle_odd a = {
    collatz_conjecture(3 * a + 1)
}

defn handle_even a = {
    collatz_conjecture(a / 2)
}

defn collatz_conjecture a = {
    if (a == 1) [1,] ([a,] + (if (a & 1 == 0) handle_odd handle_even) a)
}

defn foo = {collatz_conjecture 323}
